<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add a Poem</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="index.html">Ang Posibilidad ng Ikaw</a>
    </div>
  </nav>

  <section class="container mt-5 pt-5">
    <h1 class="text-white">Add a Poem</h1>
    <form id="poemForm" class="mt-3">
      <input class="form-control mb-2" name="title" placeholder="Title" required>
      <textarea class="form-control mb-2" name="content" placeholder="Poem content..." rows="6" required></textarea>
      <button class="btn btn-light" type="submit">Add</button>
    </form>
    <p id="status" class="text-white mt-2"></p>
  </section>

  <script type="module">
    import { supabase } from "./app.js";

    document.getElementById("poemForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const title = e.target.title.value;
      const content = e.target.content.value;

      const { error } = await supabase.from("poem").insert({ title, content });
      document.getElementById("status").textContent = error ? "Error adding poem." : "Poem added!";
      e.target.reset();
    });
  </script>
</body>
</html>
